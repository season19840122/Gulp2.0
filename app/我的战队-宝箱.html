<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>我的战队-宝箱</title>
  <link rel="stylesheet" type="text/css" href="styles/animations.css"/>
  <link href="styles/myPrize.css" rel="stylesheet" type="text/css"/>
  <link href="styles/treasure.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="container award">
  <div class="header_award">
    <ul class="tab_award" class="clearfix">
      <li><a href="#myVIP" data-toggle="tab"><b class="ico ico-10"></b>我的VIP</a></li>
      <li ><a href="#myTeam" data-toggle="tab"><b class="ico ico-8"></b>我的战队</a></li>
      <li ><a href="#myGame" data-toggle="tab"><b class="ico ico-7"></b>我的比赛</a></li>
      <li ><a href="#myPrize" data-toggle="tab"><b class="ico ico-1"></b>我的奖品 <span class="orange">(2)</span></a></li>
      <li ><a href="#sdDetail" data-toggle="tab"><b class="ico ico-2"></b>我的账单</a></li>
      <li ><a href="#myNews" data-toggle="tab"><b class="ico ico-9"></b>我的消息<span class="orange">(23)</span></a></li>
      <li class="active" id="myChest"><a href="#" data-toggle="tab"><b class="ico ico-11"></b>我的宝箱</span></a></li>
    </ul>
    <div class="operation">
      <a href="#">刷新</a>
    </div>
  </div>

  <div class="tab-content tableW1140">
  	<div class="treasure_box">
  		<div class="left_box">
        <ul>
          <li class="active"><a href="#"><img src="images/treasure/bao.png" alt=""></a></li>
          <!-- <li><a href="#"><img src="images/treasure/dao.png" alt=""></a></li> -->
          <li class="diabled"><a href="#"><img src="images/treasure/jin.png" alt=""></a></li>
          <li class="diabled"><a href="#"><img src="images/treasure/jin.png" alt=""></a></li>
          <li class="diabled"><a href="#"><img src="images/treasure/jin.png" alt=""></a></li>
          <li class="diabled"><a href="#"><img src="images/treasure/jin.png" alt=""></a></li>
        </ul>
      </div>
	  	<div class="middle_box smallScroll" v-cloak>
        <input type="hidden" id="userChestId" value="1">
        <ul>
          <li class="has" v-for="item in chests">
            <div class="item-wrap">
              <span class="num">{{ item.count }}</span>
              <img :src=" item.imgName?'images/treasure/'+item.imgName+'.png':item.imgName" alt="" class="item">
              <a href="#" class="open" @click="openChest(item.chestName)">打开</a>
              <div class="tips-wrap">
                <h4 class="title1">{{ item.chestName }}</h4>
                <p class="content">宝箱来源：{{ item.sources.join('、') }}</p>
                <h5 class="title2">可开出以下物品的碎片：</h5>
                <p :class="a.class" v-for="a in item.pieces">{{ a.goodsName }}</p>
              </div>
            </div>
          </li>
          <li class="has" v-for="item in pieces">
            <div class="item-wrap">
              <span class="num">{{ item.winCnt }}/{{ item.needCnt }}</span>
              <img :src="item.pic" alt="" class="item">
              <a href="#" class="exchange" v-if=" item.winCnt>=item.needCnt?true:false " @click.prevent="openPiece(item.goodsId)">兑换</a>
              <div class="tips-wrap">
                <h4 class="title1">{{ item.goodsName }}</h4>
                <p class="b1">价值：{{ item.price }}元</p>
                <p class="b2">兑换所需碎片数量：{{ item.needCnt }}</p>
                <p class="b2" v-if=" item.endTime ">有效期至：{{ item.endTime }}</p>
                <p class="content mt10">宝箱来源：{{ item.sources.join('、') }}</p>
              </div>
            </div>
          </li>
          <li v-for="n in num"></li>
          <!-- <li>
            <div class="item-wrap">
              <span class="num">11/15</span>
              <img src="images/treasure/mouse.png" alt="" class="item">
              <a href="#" class="exchange">兑换</a> 
              <div class="tips-wrap">
                <h4 class="title1">新手宝箱</h4>
                <p class="content">宝箱来源：新注册用户赠送新注册用户赠送新注册用户赠送新注册用户赠送新注册用户赠送新注册用户赠送.</p>
                <h5 class="title2">可开出以下物品的碎片：</h5>
                <p class="p1">88顺豆*1<br>88顺豆*1<br>大宝剑*1</p>
                <p class="p2">马栏山绝世栅栏*1<br>超级脑残片*1<br>智障级队友*1</p>
                <p class="p3">杀杀杀魔术手<br>鬼见愁需求屏蔽器<br>杀杀杀魔术手</p>
                <p class="p4">鬼见愁需求屏蔽器<br>臣臣珍藏版写真<br>臣臣典藏版写真</p>
                <p class="p5">臣臣？？？写真<br>臣臣？？？写真<br>臣臣？？？写真</p>
              </div>
            </div>
          </li>-->
        </ul>
      </div>
	  	<div class="right_box">
	  		<div class="title">
	  			宝物推荐
	  		</div>
	  		<section id="dg-container" class="dg-container">
					<div class="dg-wrapper">
						<a>
							<img src="images/vip_login_on.png" alt="image01">
							<div>宝箱说明</div>
						</a>
						<a>
							<img src="images/vip_login_on.png" alt="image02">
							<div>宝箱说明2</div>
						</a>
					</div>
					<nav>
						<span class="dg-prev"></span>
						<span class="dg-next"></span>
					</nav>
				</section>
	  		
	  		<a class="right_ad1" href="">
	  			<img src=""/>
	  		</a>
	  		<a class="right_ad2" href="">
	  			<img src=""/>
	  		</a>
	  	</div>
  	</div>
  	
  	<!-- 宝箱动画 -->
  	<div class="animate_box hide_">
  		<img class="rotate_pic rotateInitial" src="images/treasure/treasure_scale.png"/>
  		<div class="bg fadeIn"></div>
  		<img class="flash_pic flashInto" src="images/treasure/treasure_flash.png"/>
  		<img class="line_left pt-page-moveFromLeft" src="images/treasure/treasure_line.png"/>
  		<img class="line_right pt-page-moveFromRight" src="images/treasure/treasure_line.png"/>
  		<img class="tresure_word" src="images/treasure/treasure_word.png"/>
  		<img class="tresure_content scaleWidth" src="images/treasure/treasure_box.png"/>
  		<div class="tresure_div">
  			<ul></ul>
  		</div>
  		<div class="confirm">
  			确定
  		</div>
  	</div>
  </div>
	  <div id="alert_box" tabindex="-1" role="dialog" aria-hidden="true" class="modal hide" data-backdrop="static">
	  	<div class="modal-dialog modal-md">
	    	<div class="modal-content">
		      <div class="modal-header">
		        <a data-dismiss="modal" aria-hidden="true" class="close"></a>
		      </div>
		      <div class="modal-body">
		        <div class="intro text-center">
		          <p class="plr25 modal-inline-center"></p>
		        </div>
		      </div>
		      <div class="modal-footer text-right">
		        <div class="modal-btns">
		          <a href="javascript:void(0)" data-dismiss="modal" aria-hidden="true" class="btn_sure close" >关闭</a>
		        </div>
		      </div>
	    </div>
	  </div>
	</div>
</div>
<script type="text/javascript" src="scripts/jquery-3.1.0.min.js"></script>
<!--<script type="text/javascript" src="scripts/_vue.js"></script>-->
<script type="text/javascript" src="scripts/vue.min.js"></script> 
<script type="text/javascript" src="scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="scripts/jquery.gallery.js"></script>
<script src="scripts/bootstrap-datepicker.js"></script>
<script src="scripts/treasure_action1.js"></script>
<script src="scripts/treasure_main.js"></script>

<script type="text/javascript">
  $(function () {
    // 添加标记以确定提示层方向
    var addFlag = function(){
      var arr1 = [4, 5, 6, 10, 11, 12, 16, 17, 18, 22, 23, 24, 28, 29, 30, 34, 35, 36, 40, 41, 42, 46, 47, 48];
      var arr2 = [43, 44, 45, 46, 47, 48]
      arr1.forEach(function(v){
        if($('.middle_box li').eq(v-1).html() !== ''){
          // console.log(i);
          $('.middle_box li').eq(v-1).find('.tips-wrap').addClass('left');
        }
      });
      arr2.forEach(function(v){
        if($('.middle_box li').eq(v-1).html() !== ''){
          $('.middle_box li').eq(v-1).find('.tips-wrap').addClass('bottom');
        }
      });
    };

    // 碎片提示层
    $('body').on('mouseenter', '.middle_box li', function(){
      addFlag();
      $(this).find('.tips-wrap').show();
    }).on('mouseleave', '.middle_box li', function(){
      $('.tips-wrap').hide();
    });

  })
</script>

</body>
</html>
